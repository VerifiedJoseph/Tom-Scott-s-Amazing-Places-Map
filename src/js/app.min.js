"use strict";jQuery(function($){var map,markers=[],infoWindow,url=$("#map-container").attr("data-url"),currentMarker=-1,mapCenter;function initMap(locations){var marker,i,mapOptions={center:new google.maps.LatLng('54.9000','25.3167'),zoom:4,maxZoom:8,streetViewControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:false};map=new google.maps.Map(document.getElementById('map-canvas'),mapOptions);infoWindow=new google.maps.InfoWindow();for(i=0;i<Object.keys(locations).length;i+=1){marker=new google.maps.Marker({position:new google.maps.LatLng(locations[i].lat,locations[i].long),map:map,title:locations[i].title});google.maps.event.addListener(marker,'click',(function(marker,i){return function(){var content='<div class="map-video"><iframe src="https://www.youtube.com/embed/'+locations[i].id+'" frameborder="0" allowfullscreen></iframe></div>';infoWindow.setContent(content);infoWindow.open(map,marker)}})(marker,i));markers.push(marker)}}function videoGrid(videos){var html,i;for(i=0;i<Object.keys(videos).length;i+=1){html='<div class="col-xs-6 col-sm-4 col-lg-2 video"><div class="thumbnail" data-map-id="'+i+'"><img title="'+videos[i].title+'" class="video-thumbnail" src="https://i.ytimg.com/vi/'+videos[i].id+'/mqdefault.jpg" title="'+videos[i].title+'">'+'<div title="'+videos[i].title+'" class="caption"><span>'+videos[i].title+'</span></div></div>';$(".video-box").append(html)}}$.ajaxSetup({dataType:'json'});$.getJSON("videos.json").done(function(data){console.log("Fetched video list");$('.badge').append(Object.keys(data.videos).length);initMap(data.videos);videoGrid(data.videos);$(".caption").dotdotdot({ellipsis:'... ',wrap:'word',watch:"window"});$('.thumbnail').on('click',function(){var markerID=$(this).attr("data-map-id");google.maps.event.trigger(markers[markerID],'click');$("body,html").animate({scrollTop:0},800)});google.maps.event.addListenerOnce(map,'idle',function(){$('#loading').fadeOut('slow')})}).fail(function(){$('#error-note').show();$('#loading').fadeOut('slow');console.log("Failed to fetch video list")})});